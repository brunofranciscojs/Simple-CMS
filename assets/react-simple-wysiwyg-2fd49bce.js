import{a as o}from"./react-0ea938a2.js";var u=function(){return u=Object.assign||function(t){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])}return t},u.apply(this,arguments)};function y(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n}function k(){if(document.selection)return document.selection.createRange().parentElement();var e=window.getSelection();if(e&&e.rangeCount>0)return e.getRangeAt(0).startContainer.parentNode||void 0}function N(e){return e?e.replace(/&nbsp;|\u202F|\u00A0/g," "):""}function M(e){var t=document.createTextNode("");e.appendChild(t);var n=document.activeElement===e;if(t!==null&&t.nodeValue!==null&&n){var r=window.getSelection();if(r!==null){var a=document.createRange();a.setStart(t,t.nodeValue.length),a.collapse(!0),r.removeAllRanges(),r.addRange(a)}e instanceof HTMLElement&&e.focus()}}var R=o.memo(o.forwardRef(function(t,n){var r=t.className,a=t.disabled,l=t.tagName,i=t.value,s=i===void 0?"":i,f=y(t,["className","disabled","tagName","value"]),d=o.useRef(),c=o.useRef(s),v=o.useRef(f);return o.useEffect(function(){v.current=f;var g=d.current;g&&N(c.current)!==N(s)&&(c.current=s,g.innerHTML=s,M(g))}),o.useMemo(function(){function g(m){d.current=m,typeof n=="function"?n(m):typeof n=="object"&&n&&(n.current=m)}function h(m){var b,w,C=d.current;if(C){var S=C.innerHTML;S!==c.current&&((w=(b=v.current).onChange)===null||w===void 0||w.call(b,u(u({},m),{target:{value:S,name:f.name}}))),c.current=S}}return o.createElement(l||"div",u(u({},f),{className:r,contentEditable:!a,dangerouslySetInnerHTML:{__html:s},onBlur:function(m){return(v.current.onBlur||h)(m)},onInput:h,onKeyDown:function(m){return(v.current.onKeyDown||h)(m)},onKeyUp:function(m){return(v.current.onKeyUp||h)(m)},ref:g}))},[r,a,l])})),B=o.createContext(void 0);function I(e){var t=e.children,n=o.useState({htmlMode:!1,update:l}),r=n[0],a=n[1];function l(i){a(function(s){return u(u(u({},s),i),{date:Date.now()})})}return o.createElement(B.Provider,{value:r},t)}function x(){var e=o.useContext(B);if(!e)throw new Error("You should wrap your component by EditorProvider");return e}function L(e){var t=y(e,[]);return o.createElement("textarea",u({},t))}var H=[],E=[];function O(e,t){if(e&&typeof document<"u"){var n,r=t.prepend===!0?"prepend":"append",a=t.singleTag===!0,l=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(a){var i=H.indexOf(l);i===-1&&(i=H.push(l)-1,E[i]={}),n=E[i]&&E[i][r]?E[i][r]:E[i][r]=s()}else n=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(document.createTextNode(e))}function s(){var f=document.createElement("style");if(f.setAttribute("type","text/css"),t.attributes)for(var d=Object.keys(t.attributes),c=0;c<d.length;c++)f.setAttribute(d[c],t.attributes[d[c]]);var v=r==="prepend"?"afterbegin":"beforeend";return l.insertAdjacentElement(v,f),f}}var T=".rsw-editor{border:1px solid #ddd;border-radius:.375rem;display:flex;flex-direction:column;min-height:100px;overflow:hidden}.rsw-ce{flex:1 0 auto;outline:none;padding:.5rem}.rsw-ce[contentEditable=true]:empty:not(:focus):before{color:grey;content:attr(placeholder)}.rsw-html{background:transparent;border:none;font-family:monospace,Courier New}.rsw-separator{align-self:stretch;border-right:1px solid #ddd;display:flex;margin:0 3px}.rsw-dd{box-sizing:border-box;outline:none}.rsw-btn{background:transparent;border:0;color:#222;cursor:pointer;font-size:1em;height:2em;outline:none;padding:0;width:2em}.rsw-btn:hover{background:#eaeaea}.rsw-btn[data-active=true]{background:#e0e0e0}.rsw-toolbar{align-items:center;background-color:#f5f5f5;border-bottom:1px solid #ddd;display:flex}";O(T,{});function j(e){var t=e.children,n=e.containerProps,r=e.onSelect,a=y(e,["children","containerProps","onSelect"]),l=x();o.useEffect(function(){return document.addEventListener("click",i),function(){return document.removeEventListener("click",i)}});function i(d){var c;d.target!==l.$el&&(!((c=l.$el)===null||c===void 0)&&c.contains(d.target)||l.update({$selection:void 0}))}function s(d){r==null||r(d),l.update({$selection:k()})}function f(d){l.update({$el:d})}return l.htmlMode?o.createElement("div",u({className:"rsw-editor"},n),t,o.createElement(L,u({},a,{className:"rsw-ce rsw-html"}))):o.createElement("div",u({className:"rsw-editor"},n),t,o.createElement(R,u({},a,{ref:f,onSelect:s,className:"rsw-ce"})))}function z(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",style:{verticalAlign:"text-top"}},o.createElement("path",{fill:"currentColor",d:"M6.99938 12.998v-2H20.9994v2H6.99938zm0 6.0001v-2H20.9994v2H6.99938zm0-12.00001v-2H20.9994v2H6.99938zm-4 1v-3h-1v-1h2v4h-1zm-1 9.00001v-1h3v4h-3v-1h2v-.5h-1v-1h1v-.5h-2zM4.25 10c.41421 0 .75.3358.75.75 0 .2024-.08017.3861-.2105.521L3.11983 13H5v1H2v-.9218L4 11H2v-1h2.25z"}))}function D(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",style:{verticalAlign:"text-top"}},o.createElement("path",{fill:"currentColor",d:"M7 5h14v2H7V5zm0 8v-2h14v2H7zM4 4.50001c.83 0 1.5.66992 1.5 1.5 0 .83007-.67 1.5-1.5 1.5s-1.5-.66993-1.5-1.5c0-.83008.67-1.5 1.5-1.5zM4 10.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5zM7 19v-2h14v2H7zm-3-2.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5-1.5-.67-1.5-1.5.67-1.5 1.5-1.5z"}))}var U=p("Bold","𝐁","bold");p("Bullet list",o.createElement(D,null),"insertUnorderedList");var F=p("Clear formatting","T̲ₓ","removeFormat");p("Italic","𝑰","italic");p("Strike through",o.createElement("s",null,"ab"),"strikeThrough");var V=p("Link","🔗",function(e){var t=e.$selection;(t==null?void 0:t.nodeName)==="A"?document.execCommand("unlink"):document.execCommand("createLink",!1,prompt("URL","")||void 0)});p("Numbered list",o.createElement(z,null),"insertOrderedList");var _=p("Redo","↷","redo"),K=p("Underline",o.createElement("span",{style:{textDecoration:"underline"}},"𝐔"),"underline"),q=p("Undo","↶","undo");function p(e,t,n){return r.displayName=e.replace(/\s/g,""),r;function r(a){var l=x(),i=l.$el,s=l.$selection,f=!1;typeof n=="string"&&(f=!!s&&document.queryCommandState(n));function d(c){c.preventDefault(),document.activeElement!==i&&(i==null||i.focus()),typeof n=="function"?n(l):document.execCommand(n)}return l.htmlMode?null:o.createElement("button",u({type:"button",title:e},a,{className:"rsw-btn",onMouseDown:d,"data-active":f}),t)}}var Y=$("Styles",[["Normal","formatBlock","DIV"],["𝗛𝗲𝗮𝗱𝗲𝗿 𝟭","formatBlock","H1"],["Header 2","formatBlock","H2"],["𝙲𝚘𝚍𝚎","formatBlock","PRE"]]);function $(e,t){return n.displayName=e,n;function n(r){var a=x(),l=a.$el,i=a.$selection,s=a.htmlMode;if(s)return null;var f=t.findIndex(function(c){return c[1]==="formatBlock"&&(i==null?void 0:i.nodeName)===c[2]});return o.createElement(A,u({},r,{onChange:d,title:e,items:t,selected:f}));function d(c){var v=c.target,g=v.value,h=parseInt(g,10),m=t[h],b=m[1],w=m[2];c.preventDefault(),document.activeElement!==l&&(l==null||l.focus()),typeof b=="function"?b(a):document.execCommand(b,!1,w),setTimeout(function(){return v.value=g},10)}}}function A(e){var t=e.items,n=e.selected,r=y(e,["items","selected"]);return o.createElement("select",u({},r,{value:n,className:"rsw-dd"}),o.createElement("option",{hidden:!0},r.title),t.map(function(a,l){return o.createElement("option",{key:a[2],value:l},a[0])}))}function G(e){var t=y(e,[]),n=x();function r(){n.update({htmlMode:!n.htmlMode})}return o.createElement("button",u({type:"button",title:"HTML mode",className:"rsw-btn",onClick:r,"data-active":n.htmlMode},t),"</>")}function J(){var e=x();return e.htmlMode?null:o.createElement("div",{className:"rsw-separator"})}function Q(e){return o.createElement("div",u({},e,{className:"rsw-toolbar"}))}export{q as B,I as E,G as H,J as S,Q as T,j as a,_ as b,U as c,K as d,V as e,F as f,Y as g};
